"use client";

import { useParams } from "next/navigation";
import { motion } from "framer-motion";
import { useInView } from "react-intersection-observer";
import { useEffect } from "react";
import Image from "next/image";
import {
  Scale,
  Users,
  HandHeart,
  UserCheck,
  ShieldCheck,
  House,
  FileX2,
  BriefcaseBusiness,
  BookOpenText,
} from "lucide-react";
import { FaArrowAltCircleLeft } from "react-icons/fa";
import DashboardSidebar from "@/components/dashboard/DashboardSidebar";
import { useRouter } from "next/navigation";
import TopBar from "@/components/TopBar";
import Title from "@/components/Title";
import { useLingui } from "@lingui/react";
import { MdGroups } from "react-icons/md";

const contactItems = [
  {
    id: "whatsapp",
    icon: "/dash/whatsapp96.svg",
    color: "from-green-500 to-green-600",
    href: "https://wa.me/+380508128888",
  },
  {
    id: "viber",
    icon: "/dash/viber.svg",
    color: "from-purple-500 to-purple-600",
    href: "viber://chat?number=+380508128888",
  },
  {
    id: "telegram",
    icon: "/dash/telegram96.svg",
    color: "from-blue-500 to-blue-600",
    href: "https://t.me/+380508128888",
  },
  {
    id: "signal",
    icon: "/dash/signal.svg",
    color: "from-blue-500 to-blue-600",
    href: "https://signal.me/#p/+380508128888",
  },
];

export default function LegalDetailPage() {

  const { i18n } = useLingui();

  const services = [
  {
    id: "criminal_law",
    icon: Scale,
    title: i18n._("Кримінальне право"),
    description: i18n._(
        "Професійна правнича допомога в кримінальних справах"
      ),
    color: "from-indigo-800 to-purple-900",
    detailedDescription: i18n._("Професійна правнича допомога всім видам учасників кримінального провадження.\n\nЕтапи роботи:\n\n1. Представництво осіб, визнаних свідками у кримінальних провадженнях:\n- Участь в проведені слідчий дій: допит, перехресний допит; слідчий експеримент;  впізнання; забезпечення дотримання прав та свобод осіб, викликаних до органів досудового розслідування, органу прокуратури при здійсненні функцій процесуального керівництва у кримінальних провадженнях.\n\n2. Представництво осіб, права та законні інтереси яких обмежуються під час кримінального провадження:\n- Участь у слідчих діях: обшук, виїмка, тимчасове вилучення майна, огляд ін.;\n- Власників, користувачів майна тимчасово вилученого майна під час кримінального провадження;\n- Власників, користувачів майна (треті особи, щодо майна, яких вирішується питання про арешт) на яке накладено арешт ухвалою слідчого судді в межах кримінального провадження;\n- Ініціювання проведення слідчих та процесуальних дій у кримінальних провадженнях для формуванні доказової бази при спростуванні доводів сторони обвинувачення щодо підстави арешту майна як заходу забезпечення кримінального провадження;\n- Представництво при проведенні слідчих дій за участю користувача/власника арештованого майна;\n- Підготовка процесуальних документів (клопотань) до органу досудового розслідування, органів прокуратури при здійсненні функцій процесуального керівництва у кримінальних провадженнях;\n- Юридичний супровід при розгляді процесуальних документів (клопотань) поданих до органу досудового розслідування, органів прокуратури при здійсненні функцій процесуального керівництва у кримінальних провадженнях щодо заходів забезпечення кримінального провадження: арешт майна, тощо.;\n- Участь в судових засіданнях при розгляду клопотань про скасування заходів забезпечення кримінального провадження: арешту з майна, тощо;\n- Юридичний супровід виконання органами досудового розслідування, ухвал слідчих суддів про скасування арешту з майна, інших заходів забезпечення кримінального провадження.\n\n3. Здійснення представництва у кримінальних провадженнях заявника, потерпілого, цивільного позивача, цивільного відповідача, представника юридичної особи, щодо якої здійснюються провадження:\n- Супровід та участь під час проведення слідчих та процесуальних дій;\n- Підготовка процесуальних документів та їх супровід для належного розгляду;\n- Забезпечення дотримання прав та свобод осіб, при комунікаціях з стороною обвинувачення  (стороною захисту) у кримінальних провадженнях.\n\n4. Здійснення захисту підозрюваного, обвинуваченого, засудженого, виправданого у кримінальних провадженнях:\n- Здійснення належного захисту у кримінальних провадженнях щодо злочинів (кримінальних проступків) вчинених у сфері економіки, службової діяльності, загально кримінальної спрямованості;\n- Формування позиції захисту у кримінальних провадженнях будь-якої складності будь-якої  спрямованості;\n- Участь у проведенні слідчих та процесуальних діях;\n- Підготовка процесуальних документів та їх супровід для належного розгляду;\n- Участь в судових засідання на стадії досудового розслідування щодо заходів забезпечення кримінального провадження (запобіжні заходи, відсторонення від посади, арешт майна, тощо.);\n- Ведення кримінальних проваджень, які перебувають на розгляді судів всіх інстанцій (перша, апеляційна та касаційна інстанції).\n\nНадання всіх інших послуг в межах комунікації з правоохоронними органами при виконанні ними обов’язків в межах адміністративних, правоохоронних та інших функцій."),
  },
  {
    id: "family_law",
    icon: Users,
    title: i18n._("Сімейне право"),
    description: i18n._("Професійне вирішення сімейних спорів"),
    color: "from-pink-500 to-purple-500",
    detailedDescription: i18n._("Професійне вирішення сімейних спорів та пов’язаних з цим  правових питань.\n\nЕтапи роботи:\n\n1. Консультація з сімейних питань\n2. Аналіз ситуації та документів\n3. Розробка стратегії вирішення спору\n4. Підготовка документів для  подачі до суду\n5. Представництво інтересів в суді\n\nЮридичний супровід:\n\n- Розірвання шлюбу\n- Поділ спільно нажитого майна подружжя\n- Визначення місця проживання дітей\n- Стягнення аліментів на утримання дитини\n- Визначення способів участі батька (матері) у вихованні дітей\n- Стягнення аліментів на утримання дружини\n- Позбавлення батьківських прав\n- Справи про надання судом дозволу на тимчасовий виїзд дитини за межі України тому з батьків, хто проживає окремо від дитини, у якого відсутня заборгованість зі сплати аліментів та якому відмовлено другим із батьків у наданні нотаріально посвідченої згоди на такий виїзд\n- Усиновлення та опікунство."),
  },
  {
    id: "civil_law",
    icon: MdGroups,
    title: i18n._("Цивільне право"),
    description: i18n._(
      "Професійне вирішення спорів пов’язаних з цивільним законодавством"
    ),
    color: "from-blue-700 to-sky-500",
    detailedDescription: i18n._("Професійне вирішення спорів пов’язаних з цивільним законодавством.\n\nЕтапи роботи:\n\n1. Консультація з питань, пов’язаних  з цивільним законодавством.\n2. Аналіз ситуації та документів\n3. Розробка стратегії вирішення спору\n4. Підготовка документів для  подачі до суду\n5. Представництво інтересів в суді\n\nЮридичний супровід:\n\n- Поділ реальної частки домоволодіння, що є у спільній частковій власності\n- Визначення часток в спільній сумісній власності\n- Визнання права власності на спадкове майно\n- Розірвання Договорів в судовому порядку,  повернення коштів сплачених за Договором,  відшкодування збитків та моральної шкоди\n- Визнання права користування житловим приміщенням\n- Визнання права користування земельною ділянкою\n- Примусове виселення без надання іншого жилого приміщення\n- Справи, що виникають з трудових відносин\n- Визнання незаконною та скасування реєстрації права власності на нерухоме майно\n- Захисту прав споживачів"),
  },
  {
    id: "administrative_proceedings",
    icon: ShieldCheck,
    title: i18n._("Адміністративне судочинство"),
    description: i18n._(
      "Професійне вирішення справ, що відносяться до адміністративної юрисдикції"
    ),
    color: "from-emerald-600 to-indigo-700",
    detailedDescription: i18n._("Професійне вирішення справ, що відносяться до адміністративної юрисдикції.\n\nЕтапи роботи:\n\n1. Консультація Клієнта\n2. Аналіз ситуації та документів\n3. Розробка стратегії вирішення спору\n4. Підготовка документів для  подачі до суду\n5. Представництво інтересів в адміністративному суді\n\nЮридичний супровід:\n\n- Спори фізичних чи юридичних осіб із суб'єктом владних повноважень щодо оскарження його рішень (нормативно-правових актів чи правових актів індивідуальної дії), дій чи бездіяльності\n- Спори з приводу прийняття громадян на публічну службу, її проходження, звільнення з публічної служби\n- Спори між суб'єктами владних повноважень з приводу реалізації їхньої компетенції у сфері управління, у тому числі делегованих повноважень (компетенційні справи)\n- Спори, які виникають з адміністративних договорів\n- За зверненням суб'єкта владних повноважень в окремих випадках\n- Щодо правовідносин, пов'язаних з виборчим процесом чи процесом референдуму\n- Щодо доступу до публічної інформації тощо"),
  },
  {
    id: "legal_support",
    icon: House,
    title: i18n._("Юридичний супровід при придбанні  нерухомості або майнових прав на об’єкт нерухомості"),
    description: i18n._("Комплексний супровід угод з нерухомістю для безпечного придбання"),
    color: "from-blue-700 to-emerald-600",
    detailedDescription: i18n._("Комплексний супровід угод з нерухомістю для безпечного придбання.\n\nЕтапи роботи:\n\n1. Перевірка правовстановлюючих документів\n2. Аналіз обтяжень та заборон\n3. Перевірка дозвільної документації\n4. Підготовка договорів на придбання нерухомості або майнових прав на об’єкт нерухомості\n5. Супровід державної реєстрації\n\nПеревіряємо:\n\n- Право власності на нерухомість\n- Право власності або користування на земельну ділянку (у випадку придбання майнових прав)\n- Відсутність арештів та застав\n- Технічні паспорти на нерухоме майно\n- Детальний план території та проєкт будівництва (у випадку придбання майнових прав)\n- Дозволи на будівництво (у випадку придбання майнових прав)\n- Технічні умови на водопостачання та водовідведення (у випадку придбання майнових прав)\n- Технічні умови на електроенергію (у випадку придбання майнових прав)\n- Технічні умови на газопостачання (у випадку придбання майнових прав)\n- Відповідність фактичного стану документам"),
  },
  {
    id: "representation_in_enforcement_proceedings",
    icon: UserCheck,
    title: i18n._("Представництво у виконавчому провадженні"),
    description: i18n._("Професійний супровід на стадії виконання судових рішень"),
    color: "from-emerald-500 to-teal-500",
    detailedDescription: i18n._("Професійний супровід на стадії виконання судових рішень та інших виконавчих документів.\n\nНапрямки роботи:\n\n1. Представництво стягувачів\n2. Захист прав боржників\n3. Розстрочка та відстрочка виконання\n4. Зариття виконавчого провадження\n5. Оскарження дій державних та приватних виконавців\n\nПослуги для стягувачів:\n\n- Подача виконавчих документів до органів виконавчої служби\n- Контроль за діями виконавця в частині стягнення боргу\n- Розшук майна боржника\n\nПослуги для боржників:\n\n- Захист від неправомірних дій державних та приватних виконавців\n- Зменшення розміру стягнення\n- Зняття арешту з майна боржника\n- Контроль за діями виконавця в частині незаконного блокування банківських карток та накладення арештів на майно боржника"),
  },
  {
    id: "bankruptcy_of_legal_entities",
    icon: FileX2,
    title: i18n._("Банкрутство юридичних осіб"),
    description: i18n._("Супровід процедур банкрутства та ліквідації підприємств"),
    color: "from-red-500 to-gray-500",
    detailedDescription: i18n._("Супровід процедур банкрутства та ліквідації підприємств.\n\n- Представництво інтересів кредитора в процедурі банкрутства\n- Представництво інтересів боржника в процедурі банкрутства\n- Складання процесуальних документів на всіх стадіях процедури банкрутства"),
  },
  {
    id: "corporate_law",
    icon: BriefcaseBusiness,
    title: i18n._("Корпоративне право"),
    description: i18n._("Юридичний супровід корпоративних відносин та бізнес-угод"),
    color: "from-amber-900 to-zinc-700",
    detailedDescription: i18n._("Юридичний супровід корпоративних відносин та бізнес-угод.\n\n- Корпоративні спори (представництво інтересів клієнтів у судах з питань корпоративного права)\n- Захист інтересів юридичних осіб та їх учасників у державних органах, на загальних зборах акціонерів та в інших органах управління\n- Захист прав учасників товариств, включаючи право на участь в управлінні, право на отримання дивідендів та право на частку при виході зі складу учасників та при ліквідації"),
  },
  {
    id: "business_disputes",
    icon: BookOpenText,
    title: i18n._("Господарські спори"),
    description: i18n._("Юридичний супровід корпоративних відносин та бізнес-угод"),
    color: "from-amber-500 to-orange-500",
    detailedDescription: i18n._("Юридичний супровід корпоративних відносин та бізнес-угод.\n\n- Захист інтересів клієнта в судах усіх інстанцій\n- Складання процесуальних документів на всіх стадіях судового процесу\n- Надання правової інформації, консультації з питань застосування законодавства, аналіз ситуації, оцінка ризиків"),
  },
  {
    id: "other_types_of_legal_services",
    icon: HandHeart,
    title: i18n._("Інші види адвокатських послуг"),
    description: i18n._("Додаткові адвокатські послуги для комплексного вирішення правових питань"),
    color: "rom-violet-500 to-purple-500",
    detailedDescription: i18n._("Додаткові адвокатські послуги для комплексного вирішення правових питань.\n\nСпектр послуг:\n\n1. Правовий аудит підприємств\n2. Корпоративне обслуговування\n3. Супровід M&A угод\n4. Інтелектуальна власність\n\nДодатково надаємо:\n\n- Медіацію та альтернативне вирішення спорів\n- Розробку внутрішніх положень\n- Розробку Договорів\n- Супровід перевірок контролюючих органів\n- Правовий супровід IT-проєктів\n- Правове навчання персоналу\n\nІндивідуальний підхід до кожного Клієнта."),
  }
];

  const params = useParams();
  const router = useRouter();
  const [ref, inView] = useInView({
    threshold: 0.1,
    triggerOnce: true,
  });

  const serviceId = params.id as string;
  const currentService = services.find((s) => s.id === serviceId);

  useEffect(() => {
    if (!currentService) {
      router.push("/legal");
    }
  }, [currentService, router]);

  if (!currentService) {
    return null;
  }

  const Icon = currentService.icon;

  return (
    <div
      className="w-full h-full min-h-screen"
      style={{
        background:
          "linear-gradient(to right, var(--main-slate-light) 0%, var(--main-gray) 80%, var(--main-slate-dark) 100%)",
        fontFamily:
          "Montserrat, system-ui, -apple-system, BlinkMacSystemFont, sans-serif",
        overflow: "hidden",
      }}
    >
      <DashboardSidebar />
      <div className="ml-0 md:ml-[280px]">
        <div className="h-full w-full">
          <div className="container mx-auto px-4 py-4 relative z-10" ref={ref}>
            {/* Contact Info Block - верхний правый угол */}
            <TopBar inView={inView} />
            {/* Header */}
            <Title
              inView={inView}
              icon={<Scale className="w-10 h-10 text-white" />}
              titleParts={[i18n._("Юридичні"), i18n._("послуги")]}
              textGradientClasses={[
                "bg-gradient-to-r from-purple-400 to-indigo-500",
                "bg-gradient-to-r from-purple-400 to-indigo-500",
              ]}
              iconGradientClasses="bg-gradient-to-r from-purple-500 to-indigo-500"
              pulseRing={true}
              iconBoxShadowClasses="0 0 40px rgba(139, 92, 246, 0.5), inset 0 0 20px rgba(255, 255, 255, 0.2)"
              pulseRingClassName="border-purple-400"
            />
            {/* Кнопка назад */}
            <motion.button
              initial={{ opacity: 0, x: -60 }}
              animate={{ opacity: 1, x: 0 }}
              transition={{ duration: 1.2, delay: 0.4 }}
              onClick={() => router.push("/legal")}
              className="flex items-center cursor-pointer space-x-2 mb-8 text-violet-500 hover:text-violet-400 transition-colors"
            >
              <FaArrowAltCircleLeft className="w-10 h-10" />
            </motion.button>

            {/* Заголовок */}
            <motion.div
              initial={{ opacity: 0, y: 160 }}
              animate={{ opacity: 1, y: 0 }}
              transition={{ duration: 1.2, delay: 0.5 }}
              className="flex items-center space-x-4 mb-8"
            >
              <div
                className={`w-16 h-16 bg-gradient-to-r ${currentService.color} rounded-2xl flex items-center justify-center flex-shrink-0`}
              >
                <Icon className="w-8 h-8 text-white" />
              </div>
              <h1 className="text-3xl md:text-4xl font-bold text-white">
                {currentService.title}
              </h1>
            </motion.div>

            {/* Детальний опис */}
            <motion.div
              initial={{ opacity: 0, y: 180 }}
              animate={{ opacity: 1, y: 0 }}
              transition={{ duration: 1.2, delay: 0.6 }}
              className="rounded-2xl p-8 mb-8 border border-slate-600 flex flex-col"
              style={{
                background:
                  "linear-gradient(to right, var(--main-slate-dark) 0%, var(--main-slate700) 100%)",
              }}
            >
              <div className="prose prose-lg prose-invert max-w-none px-0 md:px-4 flex-1">
                <pre className="whitespace-pre-wrap text-gray-300 leading-relaxed">
                  {currentService.detailedDescription}
                </pre>
              </div>

              {/* Контактна секція внизу блоку справа */}
              <motion.div
                initial={{ opacity: 0, scale: 0.8 }}
                animate={{ opacity: 1, scale: 1 }}
                transition={{ delay: 0.6 }}
                className="flex justify-end mt-6"
              >
                <div className="rounded-xl p-3">
                  <div className="text-center mb-2">
                    <p className="text-white text-xs font-medium">
                      {i18n._("Зв’яжіться з нами")}
                    </p>
                  </div>
                  <div className="flex">
                    {contactItems.map((contact) => (
                      <div key={contact.id} className="relative group">
                        <a
                          href={contact.href}
                          target="_blank"
                          rel="noopener noreferrer"
                          className="w-8 h-8 rounded-lg bg-transparent flex items-center justify-center hover:scale-105 transition-transform"
                        >
                          <Image
                            src={contact.icon}
                            alt={contact.id}
                            width={20}
                            height={20}
                            className="w-7 h-7"
                          />
                        </a>
                        {/* Tooltip */}
                        <div className="absolute -bottom-8 left-1/2 transform -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none">
                          <div className="bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap">
                            {contact.id.charAt(0).toUpperCase() +
                              contact.id.slice(1)}
                          </div>
                        </div>
                      </div>
                    ))}
                  </div>
                </div>
              </motion.div>
            </motion.div>
          </div>
        </div>
      </div>
    </div>
  );
}
